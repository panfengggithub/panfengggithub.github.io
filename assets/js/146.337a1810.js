(window.webpackJsonp=window.webpackJsonp||[]).push([[146],{560:function(e,a,r){"use strict";r.r(a);var c=r(1),p=Object(c.a)({},(function(){var e=this,a=e._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"paxosç®—æ³•ç¬”è®°"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#paxosç®—æ³•ç¬”è®°"}},[e._v("#")]),e._v(" "),a("strong",[e._v("Paxosç®—æ³•ç¬”è®°")])]),e._v(" "),a("h2",{attrs:{id:"ä¸€ä¸ªproposal-ä¸€ä¸ªacceptor"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä¸€ä¸ªproposal-ä¸€ä¸ªacceptor"}},[e._v("#")]),e._v(" ä¸€ä¸ªProposalï¼Œä¸€ä¸ªAcceptor")]),e._v(" "),a("h3",{attrs:{id:"é”æœºåˆ¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#é”æœºåˆ¶"}},[e._v("#")]),e._v(" é”æœºåˆ¶")]),e._v(" "),a("h4",{attrs:{id:"acceptorä¸Šçš„å±æ€§"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#acceptorä¸Šçš„å±æ€§"}},[e._v("#")]),e._v(" Acceptorä¸Šçš„å±æ€§ï¼š")]),e._v(" "),a("ol",[a("li",[e._v("å˜é‡var")]),e._v(" "),a("li",[e._v("ä¸€ä¸ªäº’æ–¥é”lock")])]),e._v(" "),a("h4",{attrs:{id:"acceptorä¸Šçš„æ–¹æ³•"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#acceptorä¸Šçš„æ–¹æ³•"}},[e._v("#")]),e._v(" Acceptorä¸Šçš„æ–¹æ³•ï¼š")]),e._v(" "),a("ol",[a("li",[e._v("Acceptor:prepare() : å¯ä»¥è·å–é”ä»¥åŠvarçš„å€¼")]),e._v(" "),a("li",[e._v("Acceptor:release() : å¯ä»¥é‡Šæ”¾é”")]),e._v(" "),a("li",[e._v("Acceptor:accept(var, Value)  : å¦‚æœå·²ç»åŠ é”ï¼Œå¹¶ä¸”varæ²¡æœ‰å€¼ï¼Œåˆ™è®¾ç½®varä¸ºValueï¼Œå¹¶ä¸”é‡Šæ”¾é”")])]),e._v(" "),a("h4",{attrs:{id:"porposalä¸¤é˜¶æ®µå®ç°"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#porposalä¸¤é˜¶æ®µå®ç°"}},[e._v("#")]),e._v(" Porposalä¸¤é˜¶æ®µå®ç°ï¼š")]),e._v(" "),a("ol",[a("li",[e._v("é€šè¿‡Acceptor:prepare()æ¥è·å–é”ä»¥åŠvarçš„å€¼ï¼Œå¦‚æœä¸èƒ½ï¼Œè¡¨ç¤ºé”è¢«å ç”¨")]),e._v(" "),a("li",[e._v("å¦‚æœè·å–varçš„å€¼ä¸ºnullï¼Œåˆ™è°ƒç”¨Acceptor:accept(var, Value)æ¥è®¾ç½®å€¼")]),e._v(" "),a("li",[e._v("å¦‚æœè·å–varçš„å€¼ä¸ä¸ºnull,åˆ™Acceptor:release()é‡Šæ”¾é”")])]),e._v(" "),a("h4",{attrs:{id:"å­˜åœ¨é—®é¢˜"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å­˜åœ¨é—®é¢˜"}},[e._v("#")]),e._v(" å­˜åœ¨é—®é¢˜")]),e._v(" "),a("p",[e._v("Porposalè·å–é”ä¹‹åï¼Œå¦‚æœç³»ç»Ÿæ•…éšœï¼Œæ²¡æœ‰é‡Šæ”¾é”ï¼Œå¯¼è‡´ç³»ç»Ÿæ­»é”")]),e._v(" "),a("h3",{attrs:{id:"æŠ¢å å¼æœºåˆ¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æŠ¢å å¼æœºåˆ¶"}},[e._v("#")]),e._v(" æŠ¢å å¼æœºåˆ¶")]),e._v(" "),a("p",[e._v("Acceptorå¯ä»¥è®©æŸä¸ªProposalè·å–åˆ°çš„è®¿é—®æƒç›´æ¥å¤±æ•ˆæ‰ï¼Œä¸å†æ¥æ”¶å®ƒçš„è®¿é—®ï¼Œä¹‹åï¼Œå¯ä»¥å°†è®¿é—®æƒå‘æ”¾ç»™å…¶ä»–Proposalï¼Œè®©å…¶ä»–Proposalè®¿é—®Acceptorï¼Œå¯ä»¥é¿å…äº†æ­»é”ã€‚")]),e._v(" "),a("p",[e._v("Acceptorä¸Šå­˜åœ¨ç‰ˆæœ¬å·epochï¼ˆæ—¶é—´æˆ³ï¼‰ï¼ŒProposalæäº¤æ—¶è¦æŒ‡å®šepochï¼Œepochè¶Šå¤§æƒåˆ©è¶Šå¤§ã€‚")]),e._v(" "),a("p",[e._v("Acceptoré‡‡ç”¨å–œæ–°åŒæ—§çš„åŸåˆ™ï¼Œä¸€æ—¦æ¥æ”¶åˆ°epochè¶Šå¤§çš„æƒé™ç”³è¯·è¯·æ±‚ï¼Œé©¬ä¸Šè®©æ—§çš„epochçš„è®¿é—®æƒå¤±æ•ˆï¼Œä¸å†æ¥æ”¶ä»–ä»¬æäº¤çš„å€¼ã€‚")]),e._v(" "),a("p",[e._v("ç„¶åç»™æ–°çš„epochå‘æ”¾è®¿é—®æƒ\tï¼Œåªæ¥æ”¶æ–°epochæäº¤çš„å€¼ã€‚")]),e._v(" "),a("p",[e._v("ä¸ºäº†ä¿è¯ä¸€è‡´æ€§ï¼Œä¸åŒepochçš„Proposaléœ€è¦é‡‡ç”¨åè€…è®¤åŒå‰è€…çš„åŸåˆ™")]),e._v(" "),a("ol",[a("li",[e._v("åœ¨è‚¯å®šæ—§çš„epochæ— æ³•ç”Ÿæˆç¡®å®šæ€§å–å€¼çš„æƒ…å†µä¸‹ï¼Œæ–°çš„epochä¼šæäº¤è‡ªå·±çš„value,ä¸ä¼šå†²çª")]),e._v(" "),a("li",[e._v("ä¸€æ—¦æ—§çš„epochç”Ÿæˆäº†ç¡®å®šæ€§å–å€¼ï¼Œæ–°çš„epochè‚¯å®šå¯ä»¥è·å–åˆ°è¯¥å€¼ï¼Œå¹¶ä¸”ä¼šè®¤åŒæ­¤å€¼ï¼Œä¸ä¼šä¿®æ”¹ã€‚")])]),e._v(" "),a("h4",{attrs:{id:"acceptorä¸Šçš„å±æ€§-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#acceptorä¸Šçš„å±æ€§-2"}},[e._v("#")]),e._v(" Acceptorä¸Šçš„å±æ€§ï¼š")]),e._v(" "),a("ol",[a("li",[e._v("å½“å‰varçš„å–å€¼ <currentEpoch, currentValue>ï¼Œè®¾ç½®è¯¥Valueçš„epoch")]),e._v(" "),a("li",[e._v("æœ€æ–°å‘æ”¾è®¿é—®æƒçš„epoch <latest_prepared_epoch>ï¼Œè·å¾—æƒé™çš„epoch")])]),e._v(" "),a("h4",{attrs:{id:"acceptorä¸Šçš„æ–¹æ³•-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#acceptorä¸Šçš„æ–¹æ³•-2"}},[e._v("#")]),e._v(" Acceptorä¸Šçš„æ–¹æ³•")]),e._v(" "),a("p",[e._v("Acceptor:prepare(epoch) è¡¨ç¤ºä¼ è¿‡æ¥çš„epochèƒ½ä¸èƒ½æ‹¥æœ‰è®¿é—®æƒ")]),e._v(" "),a("ol",[a("li",[e._v("åªæ¥æ”¶æ¯”latest_prepared_epochå¤§çš„epoch,å¹¶ç»™ä¸è®¿é—®æƒ")]),e._v(" "),a("li",[e._v("è®°å½•latest_prepared_epoch= epoch,è¿”å›å½“å‰varçš„å€¼")])]),e._v(" "),a("p",[e._v("Acceptor:accept(var, prepared_epoch, value) è¡¨ç¤ºprepared_epochç†è®ºä¸Šå·²ç»æ‹¥æœ‰è®¿é—®æƒäº†ï¼Œç°åœ¨ä¿®æ”¹varçš„å€¼ä¸ºvalue")]),e._v(" "),a("ol",[a("li",[e._v("éªŒè¯latest_prepared_epoch æ˜¯å¦ç­‰äº prepared_epoch")]),e._v(" "),a("li",[e._v("å¦‚æœç­‰äºï¼Œåˆ™è®¾ç½®varçš„å€¼ <currentepoch, currentValue> = <prepared_epoch, value>")]),e._v(" "),a("li",[e._v("å¦‚æœä¸ç­‰äºï¼Œåˆ™è¡¨ç¤ºè®¿é—®æƒè¢«å…¶ä»–ProposalæŠ¢äº†è¿‡å»ï¼Œæœ¬æ¬¡æ“ä½œå¤±è´¥")])]),e._v(" "),a("h4",{attrs:{id:"proposalçš„ä¸¤é˜¶æ®µå®ç°"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#proposalçš„ä¸¤é˜¶æ®µå®ç°"}},[e._v("#")]),e._v(" Proposalçš„ä¸¤é˜¶æ®µå®ç°")]),e._v(" "),a("ol",[a("li",[a("p",[e._v("ç”Ÿæˆepochï¼Œè°ƒç”¨Acceptor:prepare(epoch)è·å–è®¿é—®æƒå’Œå½“å‰Acceptorä¸Šçš„å€¼ï¼Œå¦‚æœä¸èƒ½è·å–åˆ°è®¿é—®æƒï¼Œåˆ™æ“ä½œå¤±è´¥")])]),e._v(" "),a("li",[a("p",[e._v("å¦‚æœè·å–åˆ°è®¿é—®æƒï¼Œé‡‡ç”¨åè€…è®¤åŒå‰ç¼€çš„åŸåˆ™ï¼Œ")])]),e._v(" "),a("li",[a("ol",[a("li",[e._v("å¦‚æœç¬¬ä¸€é˜¶æ®µè¿”å›çš„å€¼ä¸ºç©º,åˆ™è‚¯å®šæ—§çš„epochæ²¡æœ‰å½¢æˆç¡®å®šæ€§å–å€¼ï¼Œåˆ™é€šè¿‡Acceptor:accept(var, prepared_epoch, value)æäº¤æ–°çš„å–å€¼ï¼Œå¦‚æœacceptæ–¹æ³•æ‰§è¡Œå¤±è´¥ï¼Œåˆ™è¯æ˜è¢«æ–°çš„epochæŠ¢å äº†è®¿é—®æƒæˆ–è€…acceptæ•…éšœ")]),e._v(" "),a("li",[e._v("å¦‚æœç¬¬ä¸€é˜¶æ®µè¿”å›çš„å€¼å­˜åœ¨ï¼Œä¸ä¸ºç©ºï¼Œé‚£ä¹ˆç›´æ¥è®¤åŒå®ƒï¼Œä¸å†è¿›è¡Œç¬¬äºŒé˜¶æ®µï¼Œç›´æ¥å‘å®¢æˆ·ç«¯è¿”å›<okï¼Œ accepted_value>")])])])]),e._v(" "),a("h2",{attrs:{id:"å¤šä¸ªacceptorçš„æƒ…å†µ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å¤šä¸ªacceptorçš„æƒ…å†µ"}},[e._v("#")]),e._v(" å¤šä¸ªAcceptorçš„æƒ…å†µ")]),e._v(" "),a("p",[e._v("Paxosç®—æ³•å°±æ˜¯å¤šä¸ªAcceptorã€‚")]),e._v(" "),a("p",[e._v("Acceptorå®ç°æ–¹å¼ä¸å˜ï¼Œä»ç„¶é‡‡ç”¨å–œæ–°åŒæ—§çš„åŸåˆ™ï¼ŒPaxosé‡‡ç”¨å°‘æ•°æœä»å¤šæ•°çš„æ€è·¯ã€‚")]),e._v(" "),a("p",[e._v("ä¸€æ—¦æŸä¸ªepochæƒ³è¦è®¾ç½®çš„å€¼è¢«åŠæ•°ä»¥ä¸Šçš„Acceptoræ¥å—ï¼Œåˆ™è®¤ä¸ºæ­¤å€¼è¢«ç¡®å®šï¼Œä¸å†æ›´æ”¹")]),e._v(" "),a("h4",{attrs:{id:"paxosçš„proposalä¸¤é˜¶æ®µå±æ€§"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#paxosçš„proposalä¸¤é˜¶æ®µå±æ€§"}},[e._v("#")]),e._v(" Paxosçš„Proposalä¸¤é˜¶æ®µå±æ€§")]),e._v(" "),a("ol",[a("li",[a("p",[e._v("ç¬¬ä¸€é˜¶æ®µï¼Œå…ˆç”Ÿæˆepochï¼Œè°ƒç”¨Acceptor:prepare(epoch)æ–¹æ³•è·å–è®¿é—®æƒå’Œå¯¹åº”çš„varçš„å–å€¼ï¼Œéœ€è¦è·å–åˆ°åŠæ•°ä»¥ä¸ŠAcceptorçš„è®¿é—®æƒå’Œå¯¹åº”çš„varçš„å€¼ã€‚")])]),e._v(" "),a("li",[a("p",[e._v("ç¬¬äºŒé˜¶æ®µï¼Œå¦‚æœè·å–åˆ°åŠæ•°ä¸€ä¸‹çš„è®¿é—®æƒï¼Œåˆ™è¿›è¡Œç¬¬äºŒé˜¶æ®µï¼Œä»ç„¶é‡‡ç”¨åè€…è®¤åŒå‰è€…çš„åŸåˆ™")])]),e._v(" "),a("li",[a("ol",[a("li",[e._v("å¦‚æœè·å¾—äº†è®¿é—®æƒçš„Acceptorè¿”å›çš„å€¼éƒ½ä¸ºç©ºï¼Œåˆ™è¡¨ç¤ºæ—§çš„epochæ²¡æœ‰å½¢æˆç¡®å®šæ€§å–å€¼ï¼Œè°ƒç”¨acceptæ–¹æ³•åŠªåŠ›ä½¿<æ–°epochï¼Œæ–°value>æˆä¸ºç¡®å®šæ€§å–å€¼")])])]),e._v(" "),a("li",[a("ol",[a("li",[a("ol",[a("li",[e._v("å‘è·å–åˆ°äº†è®¿é—®æƒçš„Acceptoræäº¤å–å€¼<æ–°epochï¼Œæ–°value>")]),e._v(" "),a("li",[e._v("å¦‚æœæ²¡æœ‰æˆåŠŸï¼Œåˆ™è¡¨ç¤ºæœ‰æ›´æ–°çš„epochæŠ¢å äº†æŸä¸ªAcceptorï¼Œæˆ–è€…æŸä¸ªAcceptoræ•…éšœäº†")])])])])]),e._v(" "),a("li",[a("ol",[a("li",[e._v("å¦‚æœè·å¾—äº†è®¿é—®æƒçš„Acceptorè¿”å›çš„å€¼ä¸éƒ½ä¸ºç©ºï¼Œåˆ™è¡¨ç¤ºæ—§çš„epochå½¢æˆäº†ç¡®å®šæ€§å–å€¼ï¼Œæ–°çš„epochåªèƒ½ç”¨è¯¥å€¼ï¼Œä¸èƒ½è®¾ç½®è‡ªå·±çš„æ–°å€¼ï¼ŒProposalä¼šå–è¯¥å€¼ä½œä¸ºä¼ é€’ç»™acceptæ–¹æ³•çš„å€¼ï¼Œä»¥ä½¿å¾—é‚£äº›å€¼è¿˜ä¸ºç©ºçš„Acceptorå¾—åˆ°ä¸€è‡´çš„å€¼")])])])]),e._v(" "),a("p",[a("a",{attrs:{href:"https://www.yuque.com/attachments/yuque/0/2020/pdf/365147/1590310698169-9f0d70b0-ee9a-41ec-b01a-949450b2843c.pdf",target:"_blank",rel:"noopener noreferrer"}},[e._v("ğŸ“Zookeeper-paxosç®—æ³•è¯¦è§£.pdf"),a("OutboundLink")],1)])])}),[],!1,null,null,null);a.default=p.exports}}]);